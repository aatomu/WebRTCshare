<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title id="title">CloudflareCalls</title>
</head>
<style>
  video {
    height: 420px;
    width: 720px;
    background-color: gray;
  }
</style>

<body>
  <video id="preview"></video><br>
  <button id="new">New</button>
  <span id="stat"></span>
  <input type="text" id="shareURL" placeholder="share URL" readonly><br>
</body>

<script src="./assets/api.js"></script>
<script src="./assets/push.js"></script>
<script src="./assets/pull.js"></script>
<script>
  document.getElementById("new").addEventListener("click", () => {
    newPushSession()
  })


  document.addEventListener("load", async () => {
    const params = new URLSearchParams((new URL(window.location.href)).searchParams)
    const sourceID = params.get("id")
    if (sourceID == "") return
    newPullSession(sourceID)
  })
</script>